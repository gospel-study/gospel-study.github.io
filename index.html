<!DOCTYPE html>
<html lang="en" ng-app="favorites">
<head>
  <meta charset="utf-8" />
  <title>Favorite Talks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ng-tags-input/2.3.0/ng-tags-input.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ng-tags-input/2.3.0/ng-tags-input.bootstrap.min.css" />

  <script data-require="angular.js@1.2.x" src="https://code.angularjs.org/1.2.28/angular.js" data-semver="1.2.15"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ng-tags-input/2.3.0/ng-tags-input.min.js"></script>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


#Alma5320github

</head>




<body ng-controller="MainCtrl as ctrl">
<div class="container">

  <div class="search-container">

        <button data-toggle="collapse" data-target="#tag_filter">Filter by Tag</button>
        <button data-toggle="collapse" data-target="#text_filter">Filter by Text Search</button>
        
        <div id="tag_filter" class="collapse">
          <tags-input ng-model="ctrl.tags"
                      placeholder="Enter a tag (e.g. Faith)"
                      on-tag-added="tagsChanged()" 
                      on-tag-removed="tagsChanged()"
                      >
          <auto-complete source="ctrl.loadTags($query)" min-length="1"></auto-complete>
          </tags-input>
        </div>

        <div id="text_filter" class="collapse">
          <form class="form-search form-inline">
              <input type="text" class="input-medium search-query" placeholder="Search">
              <button type="submit" class="btn">Search</button>
          </form>
        </div>
  </div>


  <!-- Start of Speaker Section-->
  <div class="speaker-container">
    <h3>Henry B. Eyring</h3>

      <!-- Start of Talk Section-->
      <div class="talk-container">
        <!-- Title and Links-->
        <p>A Child of Promise &ensp;
        <span class="glyphicon glyphicon-pencil" data-toggle="collapse" data-target="#eyring_child_notes"></span>
        <span class="glyphicon glyphicon-book" data-toggle="collapse" data-target="#eyring_child_quotes"></span>
        <span class="glyphicon glyphicon-tags" data-toggle="collapse" data-target="#eyring_child_tags"></span>
        <a href='https://speeches.byu.edu/talks/henry-b-eyring/child-promise/'><span class="glyphicon glyphicon-link"></span></a>

        <!-- Notes-->
        <div id="eyring_child_notes" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Notes</div>
            <ul class="list-group">
              <li class="list-group-item">In this talk, Elder Eyring lays out the case for us making better use of our time. This is a talk I want to read frequently.</li>
            </ul>
            </div>
          </div> <!-- End of Notes Section-->

        <!-- Quotes-->
        <div id="eyring_child_quotes" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Quotations</div>
            <ul class="list-group">
              <li class="list-group-item">It’s important to be sure we agree on the nature of the problem. Time passes at a fixed rate and we can’t store it. You can just decide what to do with it or not to do with it. Now, if you will look honestly at your own performance over the last few days, you will notice a paradox. At the very time you were making those lists, feeling hurried, wondering how you could get everything done, you were wasting time...Even a moment’s reflection will help you see that the problem of using your time well is not a problem of the mind but of the heart. It will only yield to a change in the very way we feel about time. The value of time must change for us. And then the way we think about it will change, naturally and wisely.</li>
              <li class="list-group-item">With regard to our property, as I have told you many times, the property which we inherit from our Heavenly Father is our time, and the power to choose in the disposition of the same. This is the real capital that is bequeathed unto us by our Heavenly Father; all the rest is what he may be pleased to add unto us. To direct, to counsel and to advise in the disposition of our time, pertains to our calling as God’s servants, according to the wisdom which he has given and will continue to give unto us as we seek it. [JD 18:354]</li>
            </ul>
            </div>
          </div> <!-- End of Quotes Section-->

          <!-- Tags-->
          <div id="eyring_child_tags" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Tags</div>
            <ul class="list-group">
              <li class="list-group-item tag-container">Time Management, Progress</li>
            </ul>
            </div>
          </div> <!-- End of Tags Section-->

          </p>
      </div> <!-- End of Talk Section-->

      <!-- Start of Talk Section-->
      <div class="talk-container">
        <!-- Title and Links-->
        <p>A Law of Increasing Returns &ensp;
        <span class="glyphicon glyphicon-pencil" data-toggle="collapse" data-target="#eyring_law_notes"></span>
        <span class="glyphicon glyphicon-book" data-toggle="collapse" data-target="#eyring_law_quotes"></span>
        <span class="glyphicon glyphicon-tags" data-toggle="collapse" data-target="#eyring_law_tags"></span>
        <a href='https://speeches.byu.edu/talks/henry-b-eyring/law-increasing-returns/'><span class="glyphicon glyphicon-link"></span></a>

        <!-- Notes-->
        <div id="eyring_law_notes" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Notes</div>
            <ul class="list-group">
              <li class="list-group-item">In this talk, Elder Eyring lays out a beautiful outline of the nature of blessings that take a long time to arrive. I absolutely love this talk.</li>
            </ul>
            </div>
          </div> <!-- End of Notes Section-->

        <!-- Quotes-->
        <div id="eyring_law_quotes" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Quotations</div>
            <ul class="list-group">
              <li class="list-group-item">If you wanted to give this idea a name, you could call it “the law of increasing returns.” The simple fact is that there is a God who wants us to have faith in him. He knows that to strengthen faith we must use it. And so he gives us the chance to use it by letting some of the spiritual rewards we want most be delayed. Instead of first effort yielding returns, with a steady decline, it’s the reverse. First efforts, and even second efforts, seem to yield little. And then the rewards begin, perhaps much later, to grow and grow.</li>
            </ul>
            </div>
          </div> <!-- End of Quotes Section-->

          <!-- Tags-->
          <div id="eyring_law_tags" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Tags</div>
            <ul class="list-group">
              <li class="list-group-item tag-container">Eternal Progression</li>
            </ul>
            </div>
          </div> <!-- End of Tags Section-->
          </p>
        </div> <!-- End of Talk Section-->

      </div> <!-- End of Speaker Section-->

    <!-- Start of Speaker Section-->
  <div class="speaker-container">
    <h3>Gordon B. Hinckley</h3>

      <!-- Start of Talk Section-->
      <div class="talk-container">
        <!-- Title and Links-->
        <p>Forgiveness &ensp;
        <span class="glyphicon glyphicon-pencil" data-toggle="collapse" data-target="#hinckley_forgivness_notes"></span>
        <span class="glyphicon glyphicon-book" data-toggle="collapse" data-target="#hinckley_forgivness_quotes"></span>
        <span class="glyphicon glyphicon-tags" data-toggle="collapse" data-target="#hinckley_forgivness_tags"></span>
        <a href='https://www.churchofjesuschrist.org/study/general-conference/2005/10/forgiveness?lang=eng'><span class="glyphicon glyphicon-link"></span></a>

        <!-- Notes-->
        <div id="hinckley_forgivness_notes" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Notes</div>
            <ul class="list-group">
              <li class="list-group-item">This is a simple, but extremely moving (to me) talk on the power of forgivness.</li>
            </ul>
            </div>
          </div> <!-- End of Notes Section-->

        <!-- Quotes-->
        <div id="hinckley_forgivness_quotes" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Quotations</div>
            <ul class="list-group">
              <li class="list-group-item">I often think of a poem I read long ago. It goes like this:<br>
                <blockquote> Let me live in a house by the side of the road,<br>
                Where the race of men go by﻿—<br>
                The men who are good and the men who are bad,<br>
                As good and as bad as I.<br><br>
                I would not sit in the scorner’s seat,<br>
                Or hurl the cynic’s ban;﻿—<br>
                Let me live in a house by the side of the road<br>
                And be a friend to man." <br> - Samuel Walter Foss
              </blockquote>
                That is the way I feel.<br> Age does something to a man. It seems to make him more aware of the need for kindness and goodness and forbearance. He wishes and prays that men might live together in peace without war and contention, argument and conflict. He grows increasingly aware of the meaning of the great Atonement of the Redeemer, of the depth of His sacrifice, and of gratitude to the Son of God, who gave His life that we might live.
            </li>
            </ul>
            </div>
          </div> <!-- End of Quotes Section-->

          <!-- Tags-->
          <div id="hinckley_forgivness_tags" class="collapse">
          <div class="panel panel-default">
            <div class="panel-heading">Tags</div>
            <ul class="list-group">
              <li class="list-group-item tag-container">Forgiveness</li>
            </ul>
            </div>
          </div> <!-- End of Tags Section-->

          </p>
      </div> <!-- End of Talk Section-->

    </div> <!-- End of Speaker Section-->

</div> <!-- End of Main Container-->
</body>



<script>
  var app = angular.module('favorites', ['ngTagsInput']);

  app.controller('MainCtrl', function ($scope, $http, $q, $filter, $timeout) {

    let self = this;

    this.tags = [];

    // Preload Tags based on current entries
    let all_tags_set = new Set();
    $("li.tag-container").each(function(){
      var $this_tagset = $(this);
      var current_tags = $this_tagset.text().split(',');
      current_tags = current_tags.map(s => s.trim());
      current_tags.forEach(function (item, index) {
        all_tags_set.add(item);
        })
    });

    let all_tags = [];
    let all_tags_array = Array.from(all_tags_set).sort();
    all_tags_array.forEach(function (item, index) {
        all_tags.push({"text":item});
        });
    this.allTags = all_tags;

    this.loadTags = function (query) {
      return $timeout(function () {
        return $filter('filter')(self.allTags, query);
      });
    };

    // Filter talks with updated tags
    $scope.tagsChanged = function(tag) {
      var current_tags = [];
      self.tags.forEach(function (item, index) {
        current_tags.push(item.text.toLowerCase());
      });

      $('div.speaker-container').each(function(){
          var $this_speaker = $(this);
          var count_visible = 0;

          $this_speaker.find('div.talk-container').each(function(){
            var $this_talk = $(this);

            var talk_tags = $this_talk.find('li.tag-container').text().split(',')
            talk_tags = talk_tags.map(s => s.trim().replace(/\s+/g, '-').toLowerCase());

            if(current_tags.length == 0 || talk_tags.some(item => current_tags.includes(item)) ){
              $this_talk.closest('div.talk-container').fadeIn();
              count_visible++;
            }
            else{
              $this_talk.closest('div.talk-container').fadeOut();
            }
          });

          if(count_visible)
            $this_speaker.closest('div.speaker-container').fadeIn();
          else $this_speaker.closest('div.speaker-container').fadeOut();
      });
    };

  });

  // Text Search Filters
  $('.form-search').on('submit',function(){return false;});
  $('.form-search .btn').on('click', function(e){
      var query = $.trim($(this).prevAll('.search-query').val()).toLowerCase();
      $('div.speaker-container').each(function(){
          var $this_speaker = $(this);
          var count_visible = 0

          $this_speaker.find('div.talk-container').each(function(){
            var $this_talk = $(this);
            if($this_talk.text().toLowerCase().indexOf(query) === -1){
              $this_talk.closest('div.talk-container').fadeOut();
            }
            else{
              $this_talk.closest('div.talk-container').fadeIn();
              count_visible++;
            }
          });

          if(count_visible)
            $this_speaker.closest('div.speaker-container').fadeIn();
          else $this_speaker.closest('div.speaker-container').fadeOut();
      });
  });


</script>


</html>
